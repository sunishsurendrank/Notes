# Git Basics

## How to add git credentails for a single repository

This will add a git config file inside .git folder and stored the password in windows credentails
```
git config credential.${remote}.username sunishsurendrank
git config credential.helper store
git pull
```

## How to squash commits

Provide the count of commits that need to be squashed HEAD~1
```
git reset --soft HEAD~1
git add.
git commit -m "xyz"
git push --force
```

## How to do branch to branch merge

we can push the code into the different branch using the below command 

```
git push sunish origin/master
```

# Git Internals
We all used the git as source code version controlling system.But how many of us explored what happens when we do a ```git add , git commit``` int our local repositories.

Here we go and explore the git commands.For this i have created a folder called git_project and under it  ran ```git init``` command ,which will initialise the git repository.

Inoder to watch the changes in the .git folder , i have used below command.
So this will watch the folder changes in every 1 second.


```
cd /.git
```
```
watch -n 1 -d find .
```

Let's add a new file called test.txt in the project folder and run the below command 

```
 git add .
```
The below figure shows the difference and extra files created by the git.

![image](/images/Git/Git_Figure1_gitaddcommand.PNG)

Under the objects folder we can see one folder called 76 created and under it there is a file created with name e579a

We can open the file using below command and see what it have.

```
git cat-file -p 76e579
```
![image](/images/Git/Git_Figure2_openobjectfile.PNG)

So this means that the above file is a copy of our test.txt file.The below figure explains how git is mapping our test.txt into the blob file.


![image](/images/Git/Git_Figure3_objectmapping.PNG)

Now we will commit the test.txt to the git and see what all files are getting generated by git in backend.
```
git commit -m "Add new file"
```
![image](/images/Git/Git_Figure4_gitcommitcommand.PNG)

The right side section shows the previous state of the .git folder and left section shows the current state of the .git folder.Hence we can easly understand the extra files git created under .git folder.

So here we can see few more folders and files got created under the objects folder.

![image](/images/Git/Git_Figure5_gitcommitfolderstructure.PNG)

This shows the concept of Blob and tree in Git.

when we commit any changes into Git , Git will store all those commit details in a Object file that is D43e9b in the above diagram and it will point to the tree which is C193f1 file ,Again the tree file points to the blob 76e579 file.

So it will be like the files will be commit --> tree --> blob

Lets checkin one more file called test1.txt and see how this object files are managing it.

![image](/images/Git/Git_Figure6_secondcommit.PNG)


The right side of the picture shows how the objects are mapped when we do a second commit.

## Push code to git server

Usually when the project starts , one of the architect start building concept of the project and keep the plans in his local git repository. When the development start , a group of developers need the plan. So the architect needs to share his plan/code with the team.The best way is to checkin the plan/code in the server repository.

So lets explore how he can do the push from his local repository to the server repository. In this example i created a repository called TestRepo in my machine and also in the server , here i am using GitHub as my server.

I commited my files to the local Repository. So now we need to link the local repository to the server repository , for this we need to run the below git command from the local repo.

```
git remote add origin https://github.com/sunishsurendrank/TestRepo.git
```

So what actually happens in the backend is this url is getting appeded to file called config under .git folder.

![image](/images/Git/Git_Figure7_configfile.PNG)

## Difference between HEAD and heads in git

If we move into the .git folder we can see a file called HEAD.
Cat that file and see what it have. It is a simple one line which points to the /refs/heads/\<branch>

For this example i have created a local repository and it default have a master branch.When i open the read the file HEAD it will be pointing to the /refs/heads/master. Now lets create a another branch called sunish. So if we open now and see the HEAD file it still point to the /refs/heads/master because we didnt checkout into sunish branch.

Now lets move to the branch sunish , now the HEAD file is pointing the folder /refs/heads/sunish . if you go through the below image you can understand much more.

![image](/images/Git/Git_Figure8_HEAD.PNG)

So now lets see what is heads means.HEAD points to the current branch and heads point to the current commit in that branch.

![image](/images/Git/Git_Figure9_heads.PNG)

In this situation we have two branch master and sunish , and in sunish branch i have changed few files and commited thats why you can see the heads/sunish moved and pointing to the new commit.But if you open the heads/master it will be pointing to the branch out commit.

## Difference between git fetch and git pull

This difference you can get by just googling , but most of the result say git pull = git fetch + git merge. This is absolutely correct , but lets explore little more in deep and see how git handles this concepts.

![image](/images/Git/Git_Figure10_gitfetch.PNG)

The both diagram is self explatory. So please go through the comments which i mentioned in the both diagram.

![image](/images/Git/Git_Figure11_gitpull.PNG)

## How to solve git conflicts in terminal
In order to learn this part we need create two branches one branch we will default master branch and second one i will be creating with name sunish.

Total two branch
```
 --> master (dafault branch) with text.txt
 --> sunish (new branch) with test.txt
```
Initially both branch have same content which is test.txt. And considering this as a example we will have content in test.txt as "abc".

![image](/images/Git/Git_Figure12_comparingtwofiles.PNG)

Now inorder to make conflict we will change the content of sunish branch test.txt to "def".

So test.txt in master branch have abc , test.txt in sunish branch have "def".

![image](/images/Git/Git_Figure13_updatingfileinsunish.PNG)

Run the below command to see the difference,this will show the difference between master and current branch that is sunish in this case.

```
git diff master
```
![image](/images/Git/Git_Figure14_gitdiff.PNG)

run the below command 
```
git merge
```
This will through the conflict message.
Now open the test.txt file your will see the conflict line.
```
<<< HEADS
>>> master
```
Remove the conflicts and do the commit again ,once that done do the merge it will work.



